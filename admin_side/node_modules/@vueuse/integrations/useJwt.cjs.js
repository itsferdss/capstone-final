'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var vueDemi = require('vue-demi');
var jwt_decode = require('jwt-decode');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var jwt_decode__default = /*#__PURE__*/_interopDefaultLegacy(jwt_decode);

/**
 * Reactive decoded jwt token.
 *
 * @see https://vueuse.org/useJwt
 * @param jwt
 */
function useJwt(encodedJwt, options = {}) {
    const encodedJwtRef = vueDemi.ref(encodedJwt);
    const { onError, fallbackValue = null, } = options;
    const decodeWithFallback = (encodedJwt, options) => {
        try {
            return jwt_decode__default['default'](encodedJwt, options);
        }
        catch (err) {
            onError === null || onError === void 0 ? void 0 : onError(err);
            return fallbackValue;
        }
    };
    const header = vueDemi.computed(() => decodeWithFallback(encodedJwtRef.value, { header: true }));
    const payload = vueDemi.computed(() => decodeWithFallback(encodedJwtRef.value));
    return {
        header,
        payload,
    };
}

exports.useJwt = useJwt;
