{
  "version": 3,
  "sources": ["../../vuetify/src/components/VDialog/VDialog.tsx"],
  "sourcesContent": ["// Styles\nimport './VDialog.sass'\n\n// Components\nimport { VDialogTransition } from '@/components/transitions'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VOverlay } from '@/components/VOverlay'\nimport { makeVOverlayProps } from '@/components/VOverlay/VOverlay'\n\n// Composables\nimport { forwardRefs } from '@/composables/forwardRefs'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useScopeId } from '@/composables/scopeId'\n\n// Utilities\nimport { computed, mergeProps, nextTick, ref, watch } from 'vue'\nimport { focusableChildren, genericComponent, IN_BROWSER, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { Component } from 'vue'\nimport type { OverlaySlots } from '@/components/VOverlay/VOverlay'\n\nexport const makeVDialogProps = propsFactory({\n  fullscreen: Boolean,\n  retainFocus: {\n    type: Boolean,\n    default: true,\n  },\n  scrollable: Boolean,\n\n  ...makeVOverlayProps({\n    origin: 'center center' as const,\n    scrollStrategy: 'block' as const,\n    transition: { component: VDialogTransition as Component },\n    zIndex: 2400,\n  }),\n}, 'VDialog')\n\nexport const VDialog = genericComponent<OverlaySlots>()({\n  name: 'VDialog',\n\n  props: makeVDialogProps(),\n\n  emits: {\n    'click:outside': (e: MouseEvent) => true,\n    'update:modelValue': (value: boolean) => true,\n    afterLeave: () => true,\n  },\n\n  setup (props, { slots }) {\n    const isActive = useProxiedModel(props, 'modelValue')\n    const { scopeId } = useScopeId()\n\n    const overlay = ref<VOverlay>()\n    function onFocusin (e: FocusEvent) {\n      const before = e.relatedTarget as HTMLElement | null\n      const after = e.target as HTMLElement | null\n\n      if (\n        before !== after &&\n        overlay.value?.contentEl &&\n        // We're the topmost dialog\n        overlay.value?.globalTop &&\n        // It isn't the document or the dialog body\n        ![document, overlay.value.contentEl].includes(after!) &&\n        // It isn't inside the dialog body\n        !overlay.value.contentEl.contains(after)\n      ) {\n        const focusable = focusableChildren(overlay.value.contentEl)\n\n        if (!focusable.length) return\n\n        const firstElement = focusable[0]\n        const lastElement = focusable[focusable.length - 1]\n\n        if (before === firstElement) {\n          lastElement.focus()\n        } else {\n          firstElement.focus()\n        }\n      }\n    }\n\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        val\n          ? document.addEventListener('focusin', onFocusin)\n          : document.removeEventListener('focusin', onFocusin)\n      }, { immediate: true })\n    }\n\n    watch(isActive, async val => {\n      await nextTick()\n      if (val) {\n        overlay.value!.contentEl?.focus({ preventScroll: true })\n      } else {\n        overlay.value!.activatorEl?.focus({ preventScroll: true })\n      }\n    })\n\n    const activatorProps = computed(() =>\n      mergeProps({\n        'aria-haspopup': 'dialog',\n        'aria-expanded': String(isActive.value),\n      }, props.activatorProps)\n    )\n\n    useRender(() => {\n      const overlayProps = VOverlay.filterProps(props)\n\n      return (\n        <VOverlay\n          ref={ overlay }\n          class={[\n            'v-dialog',\n            {\n              'v-dialog--fullscreen': props.fullscreen,\n              'v-dialog--scrollable': props.scrollable,\n            },\n            props.class,\n          ]}\n          style={ props.style }\n          { ...overlayProps }\n          v-model={ isActive.value }\n          aria-modal=\"true\"\n          activatorProps={ activatorProps.value }\n          role=\"dialog\"\n          { ...scopeId }\n        >\n          {{\n            activator: slots.activator,\n            default: (...args) => (\n              <VDefaultsProvider root=\"VDialog\">\n                { slots.default?.(...args) }\n              </VDefaultsProvider>\n            ),\n          }}\n        </VOverlay>\n      )\n    })\n\n    return forwardRefs({}, overlay)\n  },\n})\n\nexport type VDialog = InstanceType<typeof VDialog>\n"],
  "mappings": "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",
  "names": ["makeVDialogProps", "propsFactory", "fullscreen", "Boolean", "retainFocus", "type", "default", "scrollable", "makeVOverlayProps", "origin", "scrollStrategy", "transition", "component", "VDialogTransition", "zIndex", "VDialog", "genericComponent", "name", "props", "emits", "e", "value", "afterLeave", "setup", "_ref", "slots", "isActive", "useProxiedModel", "scopeId", "useScopeId", "overlay", "ref", "onFocusin", "before", "relatedTarget", "after", "target", "contentEl", "globalTop", "document", "includes", "contains", "focusable", "focusableChildren", "length", "firstElement", "lastElement", "focus", "IN_BROWSER", "watch", "val", "addEventListener", "removeEventListener", "immediate", "nextTick", "preventScroll", "activatorEl", "activatorProps", "computed", "mergeProps", "String", "useRender", "overlayProps", "VOverlay", "filterProps", "_createVNode", "_mergeProps", "class", "style", "$event", "activator", "_len", "arguments", "args", "Array", "_key", "VDefaultsProvider", "forwardRefs"]
}
